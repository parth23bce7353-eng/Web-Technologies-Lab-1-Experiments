<!DOCTYPE html>
<html>
<head>
    <title>AJAX Weather Dashboard</title>
    <style>
        body {
            font-family: Arial;
            text-align: center;
            margin-top: 50px;
        }
        input, button {
            padding: 8px;
            margin: 5px;
        }
        #weatherResult {
            margin-top: 20px;
            font-size: 18px;
        }
        #spinner {
            display: none;
            margin-top: 10px;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h2>Weather Information Dashboard</h2>
    <input type="text" id="cityInput" placeholder="Enter city name">
    <button onclick="getWeather()">Get Weather</button>
    <div id="spinner">Loading...</div>
    <div id="weatherResult"></div>
<script>
    let lastSearchedCity = "";
    let lastWeatherData = null;
    function getWeather() {
        const city = document.getElementById("cityInput").value.trim();
        const resultDiv = document.getElementById("weatherResult");
        const spinner = document.getElementById("spinner");
        if (city === "") {
            resultDiv.innerHTML = "<p class='error'>Please enter a city name.</p>";
            return;
        }
        if (city.toLowerCase() === lastSearchedCity.toLowerCase() && lastWeatherData) {
            displayWeather(lastWeatherData);
            return;
        }
        spinner.style.display = "block";
        resultDiv.innerHTML = "";
        const apiKey = "YOUR_API_KEY";  
        const url = "https://api.openweathermap.org/data/2.5/weather?q=" 
                    + city + "&appid=" + apiKey + "&units=metric";
        const xhr = new XMLHttpRequest();
        xhr.open("GET", url, true);
        xhr.onload = function() {
            spinner.style.display = "none";
            if (xhr.status === 200) {
                const data = JSON.parse(xhr.responseText);
                if (data.cod === 200) {
                    lastSearchedCity = city;
                    lastWeatherData = data;
                    displayWeather(data);
                } else {
                    resultDiv.innerHTML = "<p class='error'>City not found.</p>";
                }
            } 
            else {
                resultDiv.innerHTML = "<p class='error'>Network error. Try again.</p>";
            }
        };
        xhr.onerror = function() {
            spinner.style.display = "none";
            resultDiv.innerHTML = "<p class='error'>Request failed.</p>";
        };
        xhr.send();
    }
    function displayWeather(data) {
        const resultDiv = document.getElementById("weatherResult");
        const temperature = data.main.temp;
        const humidity = data.main.humidity;
        const condition = data.weather[0].description;
        resultDiv.innerHTML = `
            <p><strong>Temperature:</strong> ${temperature} Â°C</p>
            <p><strong>Humidity:</strong> ${humidity} %</p>
            <p><strong>Condition:</strong> ${condition}</p>
        `;
    }
</script>
</body>
</html>
